<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Сигмоида · Хаб игр</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Unbounded:wght@500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/webapp/hub.css" />
</head>
<body>
    <div class="background-glow"></div>
    <div class="canvas">
        <header class="hero" id="home">
            <nav class="hero-nav">
                <div class="nav-pill">
                    <a href="#home">Главная</a>
                    <a href="#create">Создать</a>
                    <a href="#catalog">Игры</a>
                    <a href="#about">О платформе</a>
                </div>
                <div class="session" id="session-controls">
                    <button class="button ghost" id="login-button">Войти по коду</button>
                </div>
            </nav>
            <div class="hero-content">
                <span class="hero-label">SPROUEE PLATFORM</span>
                <h1>Сигмоида</h1>
                <p>Переосмысливаем будущее игровой индустрии: сформулируй фантазию, и нейросеть соберёт живую Phaser-игру прямо в браузере.</p>
                <div class="hero-actions">
                    <a class="button primary" href="#create">Создать игру</a>
                    <a class="button ghost" href="#catalog">Каталог</a>
                </div>
            </div>
        </header>

        <main class="content">
            <section class="panel generator" id="create">
                <div class="panel-header">
                    <h2>Создай игру без бота</h2>
                    <p>Опиши атмосферу, жанр или механику — нейросеть соберёт песочницу и сразу даст ссылку.</p>
                </div>
                <form id="generator-form" class="generator-form">
                    <label for="generator-idea">Идея игры</label>
                    <textarea id="generator-idea" name="idea" rows="4" placeholder="Например: ретро-платформер о роботе, который спасает летающий город" required></textarea>
                    <div class="generator-actions">
                        <button type="submit" class="button primary" id="generator-submit">Создать</button>
                        <span class="generator-status" id="generator-status"></span>
                    </div>
                </form>
            </section>

            <section class="panel info" id="about">
                <div class="panel-header">
                    <h2>О платформе</h2>
                    <p>Сигмоида — это веб-студия игр внутри Telegram экосистемы. Главное — идея, остальное делает нейросеть.</p>
                </div>
                <div class="info-columns">
                    <article>
                        <h3>Как начать</h3>
                        <p>Авторизуйся кодом из бота, чтобы видеть личный каталог и делиться играми с друзьями.</p>
                    </article>
                    <article>
                        <h3>Гибкость</h3>
                        <p>Phaser-песочница поддерживает доработки: попроси агента изменить игру — новая версия появится в ленте.</p>
                    </article>
                    <article>
                        <h3>Мобильность</h3>
                        <p>Весь интерфейс адаптирован под телефоны — достаточно ссылки, чтобы запустить игру в Telegram WebApp.</p>
                    </article>
                </div>
            </section>

            <section class="panel catalog" id="catalog">
                <header class="catalog-header">
                    <div>
                        <h2>Каталог игр</h2>
                        <p>Свежие релизы от Сигмоиды и пользователей платформы.</p>
                    </div>
                    <div class="filters" id="filters">
                        <button class="chip active" data-scope="all">Все</button>
                        <button class="chip" data-scope="mine">Мои</button>
                    </div>
                </header>
                <section class="games" id="game-list" aria-live="polite"></section>
                <div class="actions">
                    <button class="button" id="load-more">Показать ещё</button>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>© 2025 SPROUEE · Нейро-песочница «Сигмоида». Игры хранятся ограниченное время — поделись ссылкой заранее.</p>
        </footer>
    </div>

    <div class="modal hidden" id="login-modal" role="dialog" aria-modal="true" aria-labelledby="login-title">
        <div class="modal-content">
            <h2 id="login-title">Войти по коду</h2>
            <p class="modal-text">Бот пришлёт тебе код из 6 символов. Введи его здесь, чтобы открыть личный список игр.</p>
            <form id="login-form">
                <label for="login-code">Код входа</label>
                <input id="login-code" name="code" type="text" inputmode="text" autocomplete="one-time-code" maxlength="6" placeholder="ABC123" required />
                <div class="modal-actions">
                    <button type="button" class="button ghost" id="login-cancel">Отмена</button>
                    <button type="submit" class="button primary">Войти</button>
                </div>
            </form>
            <p class="modal-error hidden" id="login-error"></p>
        </div>
    </div>

    <template id="game-card-template">
        <article class="game-card">
            <header>
                <h3 class="game-title"></h3>
                <span class="game-time"></span>
            </header>
            <p class="game-summary"></p>
            <div class="game-meta">
                <span class="game-model"></span>
                <span class="game-author"></span>
            </div>
            <div class="game-actions">
                <a class="button primary" target="_blank" rel="noopener" href="#">Играть</a>
                <button class="button ghost" data-copy>Скопировать ссылку</button>
                <button class="button ghost" data-tweak>Уточнить игру</button>
            </div>
        </article>
    </template>

    <div class="modal hidden" id="tweak-modal" role="dialog" aria-modal="true" aria-labelledby="tweak-title">
        <div class="modal-content">
            <h2 id="tweak-title">Попросить доработку</h2>
            <p class="modal-text">Расскажи, что изменить. Например: «сделай фон тёмным и добавь больше врагов».</p>
            <form id="tweak-form">
                <label for="tweak-instructions">Описание изменений</label>
                <textarea id="tweak-instructions" name="instructions" rows="4" required></textarea>
                <div class="modal-actions">
                    <button type="button" class="button ghost" id="tweak-cancel">Отмена</button>
                    <button type="submit" class="button primary">Применить</button>
                </div>
            </form>
            <p class="modal-error hidden" id="tweak-error"></p>
        </div>
    </div>

    <script type="module" src="/webapp/hub.js"></script>
</body>
</html>
